use uom::si::available_energy::kilojoule_per_kilogram;
use uom::si::pressure::bar;
use uom::si::f64::*;
use uom::si::specific_heat_capacity::kilojoule_per_kilogram_kelvin;
use uom::si::specific_volume::cubic_meter_per_kilogram;
use uom::si::thermodynamic_temperature::{degree_celsius, kelvin};

use crate::interfaces::functional_programming::ph_flash_eqm::{s_ph_eqm, t_ph_eqm, v_ph_eqm};
use crate::region_1_subcooled_liquid::h_tp_1;
use crate::region_2_vapour::h_tp_2;

/// saturation table (see page 174)
#[test]
#[ignore = "yet to implement proper test"]
pub fn saturation_table_0_to_44_degc(){

    //[t_deg_c,t_kelvin,psat_bar,v_liq_m3_per_kg,v_vap_m3_per_kg,h_liq_kj_per_kg,h_vap_kj_per_kg,enthalpy_of_vap,s_liq_kj_per_kg_k,s_vap_kj_per_kg_k],
    let steam_table: Vec<[f64; 10]> =
        vec![
        [0.0,273.15,0.006112127,0.00100021,206.14,-0.041588,2500.89,2500.93,-0.00015455,9.1558],
        [0.01,273.16,0.00611657,0.00100021,205.997,0.00061178,2500.91,2500.91,0.0,9.1555],
        [1.0,274.15,0.00657088,0.00100015,192.445,4.17665,2502.73,2498.55,0.01526,9.1291],
        [2.0,275.15,0.00705988,0.00100011,179.764,8.3916,2504.57,2496.17,0.030606,9.1027],
        [3.0,276.15,0.00758082,0.00100008,168.014,12.6035,2506.4,2493.8,0.045886,9.0765],
        [4.0,277.15,0.00813549,0.00100007,157.121,16.8127,2508.24,2491.42,0.061101,9.0506],
        [5.0,278.15,0.00872575,0.00100008,147.017,21.0194,2510.07,2489.05,0.076252,9.0249],
        [6.0,279.15,0.00935353,0.00100011,137.638,25.2237,2511.91,2486.68,0.09134,8.9994],
        [7.0,280.15,0.0100209,0.00100014,128.928,29.4258,2513.74,2484.31,0.10637,8.9742],
        [8.0,281.15,0.0107299,0.0010002,120.834,33.626,2515.57,2481.94,0.12133,8.9492],
        [9.0,282.15,0.0114828,0.00100027,113.309,37.8244,2517.4,2479.58,0.13624,8.9244],
        [10.0,283.15,0.0122818,0.00100035,106.309,42.0211,2519.23,2477.21,0.15109,8.8998],
        [11.0,284.15,0.0131295,0.00100044,99.7927,46.2162,2521.06,2474.84,0.16587,8.8755],
        [12.0,285.15,0.0140282,0.00100055,93.7243,50.41,2522.89,2472.48,0.18061,8.8514],
        [13.0,286.15,0.0149806,0.00100067,88.0698,54.6024,2524.71,2470.11,0.19528,8.8275],
        [14.0,287.15,0.0159894,0.0010008,82.7981,58.7936,2526.54,2467.75,0.2099,8.8038],
        [15.0,288.15,0.0170574,0.00100095,77.8807,62.9837,2528.36,2465.38,0.22447,8.7804],
        [16.0,289.15,0.0181876,0.0010011,73.2915,67.1727,2530.19,2463.01,0.23898,8.7571],
        [17.0,290.15,0.0193829,0.00100127,69.0063,71.3608,2532.01,2460.65,0.25344,8.7341],
        [18.0,291.15,0.0206466,0.00100145,65.0029,75.5479,2533.83,2458.28,0.26785,8.7112],
        [19.0,292.15,0.0219818,0.00100164,61.2609,79.7343,2535.65,2455.92,0.2822,8.6886],
        [20.0,293.15,0.0233921,0.00100184,57.7615,83.9199,2537.47,2453.55,0.2965,8.6661],
        [21.0,294.15,0.024881,0.00100205,54.4873,88.1048,2539.29,2451.18,0.31075,8.6439],
        [22.0,295.15,0.0264521,0.00100228,51.4225,92.289,2541.1,2448.81,0.32495,8.6218],
        [23.0,296.15,0.0281092,0.00100251,48.5521,96.4727,2542.92,2446.45,0.3391,8.6],
        [24.0,297.15,0.0298563,0.00100275,45.8626,100.656,2544.73,2444.08,0.3532,8.5783],
        [25.0,298.15,0.0316975,0.00100301,43.3414,104.838,2546.54,2441.71,0.36726,8.5568],
        [26.0,299.15,0.0336369,0.00100327,40.9768,109.021,2548.35,2439.33,0.38126,8.5355],
        [27.0,300.15,0.0356789,0.00100354,38.7582,113.202,2550.16,2436.96,0.39521,8.5144],
        [28.0,301.15,0.0378281,0.00100382,36.6754,117.384,2551.97,2434.59,0.40912,8.4934],
        [29.0,302.15,0.0400892,0.00100411,34.7194,121.565,2553.78,2432.21,0.42298,8.4727],
        [30.0,303.15,0.0424669,0.00100441,32.8816,125.745,2555.58,2429.84,0.43679,8.4521],
        [31.0,304.15,0.0449663,0.00100472,31.154,129.926,2557.39,2427.46,0.45056,8.4317],
        [32.0,305.15,0.0475925,0.00100504,29.5295,134.106,2559.19,2425.08,0.46428,8.4115],
        [33.0,306.15,0.0503508,0.00100536,28.001,138.286,2560.99,2422.7,0.47795,8.3914],
        [34.0,307.15,0.0532469,0.0010057,26.5624,142.465,2562.79,2420.32,0.49158,8.3715],
        [35.0,308.15,0.0562862,0.00100604,25.2078,146.645,2564.58,2417.94,0.50517,8.3518],
        [36.0,309.15,0.0594747,0.00100639,23.9318,150.824,2566.38,2415.56,0.51871,8.3323],
        [37.0,310.15,0.0628185,0.00100675,22.7292,155.004,2568.17,2413.17,0.5322,8.3129],
        [38.0,311.15,0.0663237,0.00100712,21.5954,159.183,2569.96,2410.78,0.54566,8.2936],
        [39.0,312.15,0.0699968,0.00100749,20.5261,163.362,2571.75,2408.39,0.55906,8.2746],
        [40.0,313.15,0.0738443,0.00100788,19.517,167.541,2573.54,2406.0,0.57243,8.2557],
        [41.0,314.15,0.0778731,0.00100827,18.5646,171.72,2575.33,2403.61,0.58575,8.2369],
        [42.0,315.15,0.0820901,0.00100867,17.6652,175.899,2577.11,2401.21,0.59903,8.2183],
        [43.0,316.15,0.0865026,0.00100908,16.8155,180.079,2578.89,2398.82,0.61227,8.1999],
        [44.0,317.15,0.091118,0.00100949,16.0126,184.258,2580.67,2396.42,0.62547,8.1816],
        ];

        for dataset in steam_table {
            let t_deg_c = dataset[0];
            let t_kelvin = dataset[1];
            let psat_bar = dataset[2];
            let v_liq_m3_per_kg = dataset[3];
            let v_vap_m3_per_kg = dataset[4];
            let h_liq_kj_per_kg = dataset[5];
            let h_vap_kj_per_kg = dataset[6];
            let enthalpy_of_vap_kj_per_kg = dataset[7];
            let s_liq_kj_per_kg_k = dataset[8];
            let s_vap_kj_per_kg_k = dataset[9];
            assert_pt_flash(t_deg_c, t_kelvin, psat_bar, 
                v_liq_m3_per_kg, v_vap_m3_per_kg, h_liq_kj_per_kg, 
                h_vap_kj_per_kg, enthalpy_of_vap_kj_per_kg, 
                s_liq_kj_per_kg_k, s_vap_kj_per_kg_k);
        }

        todo!()

}

fn assert_pt_flash(t_deg_c: f64,
    t_kelvin: f64,
    psat_bar: f64,
    v_liq_m3_per_kg: f64,
    v_vap_m3_per_kg: f64,
    h_liq_kj_per_kg: f64,
    h_vap_kj_per_kg: f64,
    enthalpy_of_vap_kj_per_kg: f64,
    s_liq_kj_per_kg_k: f64,
    s_vap_kj_per_kg_k: f64){





}
